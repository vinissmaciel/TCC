<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Relatório de estoque" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="ef36287d-8146-45da-a3c0-ef6300cb55e5">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<queryString language="SQL">
		<![CDATA[SELECT p.nome, p.preco, e.nome AS nomeemba, es.quantidade, p.unidade, es.quantidade_materiaprima, SUM(COALESCE(iv.quantidade_comprada, 0))
FROM produto p
INNER JOIN embalagem e ON e.id = p.id_embalagem
INNER JOIN estoque es ON es.ID_produto = p.id
LEFT JOIN item_venda iv ON iv.id_estoque = es.id
GROUP BY p.nome
ORDER BY SUM(iv.quantidade_comprada) DESC]]>
	</queryString>
	<field name="nome" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="preco" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nomeemba" class="java.lang.String"/>
	<field name="quantidade" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="unidade" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="quantidade_materiaprima" class="java.lang.Double">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="SUM(COALESCE(iv.quantidade_comprada, 0))" class="java.lang.Double"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="79" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="555" height="79" uuid="7d1ce551-efb1-4108-9c12-99223a53f3a4"/>
				<textElement textAlignment="Center">
					<font size="24"/>
				</textElement>
				<text><![CDATA[Relatório de estoque]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="35" splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="61" splitType="Stretch">
			<rectangle>
				<reportElement x="0" y="0" width="553" height="20" uuid="41fba5ca-e7fc-4ea7-9ce2-ee69085f0743"/>
			</rectangle>
			<staticText>
				<reportElement x="0" y="0" width="79" height="20" uuid="7e0e6008-031f-4dc8-963a-c82a496cdba4"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[Produto]]></text>
			</staticText>
			<staticText>
				<reportElement x="79" y="0" width="79" height="20" uuid="d4fe686c-f5b1-4ffe-971a-3bae19ef6d6e"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[Preço/Uni.]]></text>
			</staticText>
			<staticText>
				<reportElement x="158" y="0" width="79" height="20" uuid="baaa71c7-addd-4eb5-a097-9e56cc04c6c1"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[Embalagem]]></text>
			</staticText>
			<staticText>
				<reportElement x="237" y="0" width="79" height="20" uuid="7f73de30-d31f-4c3c-ada4-bbc086d4a348"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[Estoque]]></text>
			</staticText>
			<staticText>
				<reportElement x="316" y="0" width="79" height="20" uuid="f3748d14-ef85-4306-ae4b-1bde25cac2fe"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[Unidade]]></text>
			</staticText>
			<staticText>
				<reportElement x="395" y="0" width="79" height="20" uuid="54580eaa-b73d-4a2a-8440-ada8c14f2390"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[Matéria-prima]]></text>
			</staticText>
			<staticText>
				<reportElement x="474" y="0" width="79" height="20" uuid="01df2a67-42ca-4fde-8c6f-01cfa2d8899e"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<text><![CDATA[Qtd. vendida]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="125" splitType="Stretch">
			<rectangle>
				<reportElement x="0" y="0" width="553" height="20" uuid="45f0dc81-94d1-4578-b377-559f4261f3fc"/>
			</rectangle>
			<textField>
				<reportElement x="0" y="0" width="79" height="20" uuid="81ed2492-aa4c-4f2b-b7cf-8f0b9770d7bf"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{nome}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="79" y="0" width="79" height="20" uuid="344dd914-9b79-4374-a99c-b70d9d32e7b2"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{preco}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="158" y="0" width="79" height="20" uuid="bfcaa5dc-5680-43e2-b031-9797362d4219"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{nomeemba}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="237" y="0" width="79" height="20" uuid="fca29cbe-3f86-4f56-8e76-8b61d33c99ce"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{quantidade}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="316" y="0" width="79" height="20" uuid="ae595753-603b-4b4a-b3ce-1a68e570e1ea"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{unidade}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="395" y="0" width="79" height="20" uuid="c45268d8-b25e-43fd-82e5-df145921bdd1"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{quantidade_materiaprima}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="474" y="0" width="79" height="20" uuid="01b25fd2-ca1f-4e63-af90-f8ad486edd54"/>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{SUM(COALESCE(iv.quantidade_comprada, 0))}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="54" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
